<%-include('../../views/partials/admin/header') %>

<div class="content">
    <h3>Category</h3>

    <!-- Search Bar Form -->
    <form method="GET" action="/admin/category">
      <div class="form-group d-flex">
        <input 
          type="text" 
          name="search" 
          class="form-control" 
          placeholder="Search for customers..." 
          value=""
        >
        <button type="submit" class="btn btn-primary ml-2">Search</button>
      </div>
    </form>
    
    <!-- Add Category Form -->
    <form method="POST" action="/admin/addCategory" onsubmit="return handleFormSubmit()">
      <div class="form-group">
        <label for="categoryName">Category Name</label>
        <input type="text" class="form-control" id="categoryName" name="categoryName" placeholder="Enter category name" required>
      </div>
      <div class="form-group">
        <label for="categoryDescription">Description</label>
        <textarea class="form-control" id="categoryDescription" name="categoryDescription" rows="3" placeholder="Enter category description" required></textarea>
      </div>
      <button type="submit" class="btn btn-primary">Add Category</button>
    </form>
    
    <hr>
  
    <!-- Categories Table -->
    <h4>Category List</h4>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
          <th>Offer Price</th>
          <th>Offer</th>
          <th>Status</th>
          <th>List/Unlist</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <!-- Sample Data -->
        <tr>
          <td>Electronics</td>
          <td>All kinds of electronic items</td>
          <td>$50</td>
          <td>20% Off</td>
          <td>Active</td>
          <td>
            <button class="btn btn-danger btn-sm">Unlist</button>
          </td>
          <td>
            <button class="btn btn-warning btn-sm">Edit</button>
          </td>
        </tr>
      </tbody>
    </table>
    <%-include('../../views/partials/admin/pagination') %>
  </div>
  <%-include('../../views/partials/admin/footer') %>

  <script>
    function handleFormSubmit(e){
      e.preventDefault();
      if(!validateForm()){
        return
      }
    }


    validateForm(){
      clearErrorMessages();
      const name = document.getElementsByName("categoryName")[0].value.trim();
      const description = document.getElementsByName("categoryDescription")[0].value.trim();
      isValid = true;

      if(name===""){
        displayErrorMessage("name-error","Please enter a name");
        isValid = false;
      }else if(!/^[a-zA-Z\s]+$/.test(name)){
        displayErrorMessage("name-error","Category name should contain only alphabetic characters");
        isValid = false;
      }

      if(description===""){
        displayErrorMessage("description-error","Please enter a descriptioin");
        isValid = false;
      }
      return isValid;
    }

    function displayErrorMessage(elementId,message){
      var errorElement = document.getElementById(elementId);
      errorElement.innerText = message;
      errorElement.style.display = "block";
    }

    function clearErrorMessages(){
      const errorElements = document.getElementsByClassName("error-message");
      Array.from(errorElements).for
    }
  </script>